(function(){var kCart=function(jQuery,api_call){var obj={},topics={},response={},api=api_call,prodSetup=[],countCouponValidated=0,coountCouponValidatedSuccess=0;obj.totalCart=0;var campaignProducts={};function numberWithCommas(t){return t.toString().replace(/\B(?!\.\d*)(?=(\d{3})+(?!\d))/g,",")}function dialog(){return 1==confirm("You already carted this item, would like to change it?")}function copyQueryURLevent(){$(document).on("click","a",(function(t){if(void 0!==$(this).attr("target"))return!0;if(-1!=$(this).attr("href").indexOf("product.html"))return!0;if(-1!=$(this).attr("href").indexOf("#"))return!0;if(""==$(this).attr("href"))return!0;if(void 0===$(this).attr("href"))return!0;if("/"==$(this).attr("href"))return t.preventDefault(),window.location.href=new_url("index.html"),!1;t.preventDefault();var e=location.search;return e=removeQuerystring(e,"campaignId"),-1!=$(this).attr("href").indexOf("?")?e="&":""==e||"?"==e?e="?":e+="&",window.location.href=new_url($(this).attr("href")+e+"campaignId="+api.getCompaignId()),!1}))}function findWithValue(t,e,o){for(var r=0;r<t.length;r+=1)if(null!=t[r][e]&&-1!=t[r][e].indexOf(o))return r;return-1}function findWithAttr(t,e,o){for(var r=0;r<t.length;r+=1)if(t[r][e]===o)return r;return-1}function combinedSameBaseProduct_monthly(t){for(var e in prodSetup){var o=findWithAttr(t,"baseProductName",prodSetup[e].prod);void 0===t[o]&&(o=findWithAttr(t,"productName",prodSetup[e].prod));var r=t[o];void 0!==r&&(void 0===r.related&&(r.related=[]),void 0===r.defaultLabel&&(r.defaultLabel=prodSetup[e].defaultLabel),void 0===r.selectionOption&&(r.selectionOption=prodSetup[e].selectionOption),void 0===r.prodDescription&&(r.prodDescription=prodSetup[e].prodDescription),void 0===r.monthlyOfferDetails&&(r.monthlyOfferDetails=prodSetup[e].monthlyOfferDetails),void 0===r.OfferDetails&&(r.OfferDetails=prodSetup[e].OfferDetails),void 0!==r.related&&(r.related=prodSetup[e].related),void 0===r.order&&(r.order=prodSetup[e].order),void 0===r.tags&&(r.tags=prodSetup[e].tags),void 0===r.apiKey&&(r.apiKey=prodSetup[e].apiKey))}for(var a in t){var i=t[a],n=i.maxOrderQty;null!=i.maxOrderQty&&""!=i.maxOrderQty||(n=1);var s=i.productName.toLowerCase(),p=parseFloat(i.price)*parseInt(n),d=parseFloat(i.shippingPrice)*parseInt(n);if("ONE_TIME"==i.billingCycleType){var c=t[findWithAttr(t,"baseProductName",i.baseProductName)],l=s.slice(-2),u=s.slice(-1),h=1;isNaN(l)?isNaN(u)||(h=u):h=l,void 0===c.straight_sale&&(c.straight_sale={}),void 0===c.ss_productIds&&(c.ss_productIds=[]),void 0===c.straight_sale_per_prod&&(c.straight_sale_per_prod={}),c.straight_sale[h]={},c.straight_sale[h].productId=i.campaignProductId,c.straight_sale[h].price=p.toFixed(2),c.straight_sale[h].shippingPrice=d,c.straight_sale[h].actual_price=parseFloat(i.price).toFixed(2),c.straight_sale[h].actual_shippingPrice=parseFloat(i.shippingPrice).toFixed(2),c.straight_sale[h].qty=n,c.straight_sale[h].productDescription=i.productDescription,c.straight_sale[h].productName=i.baseProductName,c.straight_sale[h].name=i.productName,c.straight_sale[h].alias="*"+i.defaultLabel,c.straight_sale[h].label="One-Time Purchase",c.ss_productIds[h]=i.campaignProductId,c.straight_sale_per_prod[h]={},c.straight_sale_per_prod[h].productId=i.campaignProductId,c.straight_sale_per_prod[h].price=p.toFixed(2),c.straight_sale_per_prod[h].shippingPrice=d,c.straight_sale_per_prod[h].actual_price=parseFloat(i.price).toFixed(2),c.straight_sale_per_prod[h].actual_shippingPrice=parseFloat(i.shippingPrice).toFixed(2),c.straight_sale_per_prod[h].qty=n,c.straight_sale_per_prod[h].productDescription=i.productDescription,c.straight_sale_per_prod[h].productName=i.baseProductName,c.straight_sale_per_prod[h].name=i.productName,c.straight_sale_per_prod[h].alias="*"+i.defaultLabel,c.straight_sale_per_prod[h].label="One-Time Purchase"}if("RECURRING"==i.billingCycleType){var m=t[findWithAttr(t,"baseProductName",i.baseProductName)];void 0===m.monthly&&(m.monthly={}),m.monthly.productId=i.campaignProductId,m.monthly.price=p.toFixed(2),m.monthly.shippingPrice=d,m.monthly.productDescription=i.productDescription,m.monthly.productName=i.baseProductName,m.monthly.alias="*Subscription",m.monthly.label="Subscription"}-1==i.productType.indexOf("OFFER")&&t.splice(a,1)}}return obj.campaignCoupons=[],obj.campaignCouponsError=[],obj.defaultProdId=-1,obj.defaultProdName="",obj.multiple_straight_sale={},obj.quantityAssignPerProd=!0,obj.listProducts=[],jQuery.Topic=function(t){var e,o=t&&topics[t];return o||(o={publish:(e=jQuery.Callbacks()).fire,subscribe:e.add,unsubscribe:e.remove},t&&(topics[t]=o)),o},window.getQueryStringByName=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},obj.listAllCoupon=function(t){if(void 0!==t&&t.hasOwnProperty("result"))return"success"==t.result.toLowerCase()?t.message.data[api.getCompaignId()].coupons:[];return[]},obj.getCoupons=function(t,e){if(void 0!==t){if(t.hasOwnProperty("result")){if("success"==t.result.toLowerCase()){var o=findWithValue(t.message.data[api.getCompaignId()].coupons,"campaignProductId",e);if(-1==o)return!1;var r=t.message.data[api.getCompaignId()].coupons;return{couponCode:r[o].couponCode,campaignProductId:r[o].campaignProductId}}return!1}return!1}return!1},obj.getWholeOrderCoupons=function(t){var e=t.message.data[api.getCompaignId()].coupons.filter((t=>null===t.campaignProductId)),o=[];for(var r in e)o.push(e[r].couponCode);return o},obj.wholeOrderData=function(t){var e=[],o=1,r=0,a=0,i=0,n=0;for(var s in t){if(t[s].hasOwnProperty("wholeOrderCoupons")){var p={};p["product"+o+"_id"]=t[s].keycode,p["product"+o+"_qty"]=t[s].qty,e.push(p),r+=parseFloat(t[s].prodPrice),a+=parseFloat(t[s].shippingPrice),o++}i+=parseFloat(t[s].prodPrice),n+=parseFloat(t[s].shippingPrice)}return{data:e,totalShippingAmount:a.toFixed(2),totalPriceAmount:r.toFixed(2),totalPriceAllProd:i.toFixed(2),totalShippingAllProd:n.toFixed(2)}},obj.applyWholeOrderCoupon=function(t,e,o,r){var a=obj.wholeOrderData(e).data;api.orderCouponWholeOrder(t,a,(function(o){if(obj.req_response(o)){for(var r in e)if(e[r].hasOwnProperty("wholeOrderCoupons")){var a={keycode:e[r].keycode,priceDiscount:o.message.priceDiscount,shipDiscount:o.message.shipDiscount,discounted:!0,couponCode:t,wholeOrderApplied:!0};$.Topic("Updatecart").publish(a)}}else alert("Invalid Coupon Code"),$("#fields_coupon").val(""),$("#btnCoupon").html("Apply Coupon")}))},obj.reApplyCoupon=function(){var t=JSON.parse(konnekCart.cartStorage()),e="",o=!1;for(var r in t)if(void 0!==t[r].coupon&&t[r].coupon.hasOwnProperty("discounted")){e=t[r].coupon.couponCode,o=t[r].coupon.discounted;break}o&&obj.applyCouponToOrder(e,!1)},obj.validateCoupon=function(t,e,o){return new Promise(((r,a)=>{api.orderCoupon(t,e,(function(o){if(obj.req_response(o)){var i={keycode:e,priceDiscount:o.message.priceDiscount,shipDiscount:o.message.shipDiscount,discounted:!0,couponCode:t};0==o.message.priceDiscount&&0==o.message.shipDiscount?(obj.campaignCouponsError.indexOf("Invalid Coupon")&&obj.campaignCouponsError.push("Invalid Coupon"),a()):(coountCouponValidatedSuccess++,r(i))}else obj.campaignCouponsError.indexOf(o.message+"/n")&&obj.campaignCouponsError.push(o.message+"/n"),a();countCouponValidated++}),o)}))},obj.applyCouponToOrder=function(t,e){var o=void 0!==e&&e,r=JSON.parse(obj.cartStorage()),a=obj.wholeOrderData(r).totalPriceAmount,i=obj.wholeOrderData(r).totalShippingAmount;if(void 0!==r[0].wholeOrderCoupons&&-1!=r[0].wholeOrderCoupons.indexOf(t.toUpperCase()))obj.applyWholeOrderCoupon(t,r,a,i);else{for(var n=0,s=0;s<r.length;s++)r[s].hasOwnProperty("coupon")&&(r[s].coupon.hasOwnProperty("discounted")||(obj.validateCoupon(t,r[s].keycode,r[s].qty).then((function(t){""!=t&&($.Topic("Updatecart").publish(t),$("#btnCoupon").html("Apply Coupon"))})).catch((function(){0!=obj.campaignCouponsError.length&&(0==coountCouponValidatedSuccess&&alert(obj.campaignCouponsError.join().replace(/,/g," ")),coountCouponValidatedSuccess=0,obj.campaignCouponsError=[],countCouponValidated=0,$("#fields_coupon").val(""),$("#btnCoupon").html("Apply Coupon"))})),n++));0==n&&o&&(alert("Invalid Coupon Code"),$("#btnCoupon").text("Apply Coupon"),$("#fields_coupon").val(""))}0==r.length&&(alert("Invalid Coupon Code"),$("#btnCoupon").text("Apply Coupon"))},obj.cartEvents=function(){function t(t){t.find(".addToCart").hasClass("toCheckout")&&(t.find(".addToCart").html('<img src="/onlineorder/images/loading btn.svg" width="30" height="30" class="img-fluid inline-block" /> '),setTimeout((function(){t.find(".addToCart").removeClass("toCheckout"),t.find(".addToCart").trigger("click")}),700))}$(document).ready((function(){void 0!==$.fn.lightSlider&&$("#image-gallery").lightSlider({gallery:!0,item:1,vertical:!1,verticalHeight:100,vThumbWidth:50,thumbItem:3,thumbMargin:0,slideMargin:0})})),$(".details").unbind().click((function(t){t.stopPropagation(),$(".monthly-offerdetails").slideToggle("slow")})),$(".r_addToCart").unbind().on("click",(function(){if($(this).hasClass("added"))return!0;var t,e,o=0;o=parseFloat($(this).attr("price")),keycode=$(this).attr("keycode"),t=$(this).attr("imgUrl"),e=parseFloat($(this).attr("shippingPrice"));var r={prodPrice:o.toFixed(2),prodName:$(this).attr("prodname"),keycode:keycode,pos:1,qty:1,imgUrl:t,maxQty:1,shippingPrice:e,alias:""==$(this).attr("alias")?"":$(this).attr("alias")};return r.wholeOrderCoupons=obj.getWholeOrderCoupons(api.getkonnecktiveSetup()),"object"==typeof obj.getCoupons(api.getkonnecktiveSetup(),keycode)?r.coupon=obj.getCoupons(api.getkonnecktiveSetup(),keycode):0==r.wholeOrderCoupons.length&&(r.noCoupon=!0),$.Topic("Addtocart").publish(r),$(this).addClass("added").text("Checkout Now").attr("href",new_url("checkout.html"+location.search)).prev().show(),!1})),$("#continue_shopping").unbind().on("click",(function(){return location.href=new_url("index.html"+location.search),!1})),$(".cartItem .removeItem").unbind().on("click",(function(t){t.preventDefault(),$.Topic("RemoveItem").publish($(this).attr("prodname"))})),$("#fields_coupon").unbind().on("keypress",(function(t){if(t.stopPropagation(),13==(t.keyCode||t.which))return t.preventDefault(),$("#btnCoupon").trigger("click"),!1})),$(".fields_coupon").unbind().on("keypress",(function(t){var e=$(this).parents(".coupon_wrapper");if(t.stopPropagation(),13==(t.keyCode||t.which))return t.preventDefault(),e.find(".btnCoupon").trigger("click"),!1})),$(".btnCoupon").unbind().on("click",(function(t){t.stopPropagation();var e=$(this).parents(".coupon_wrapper");$(this).html('<img src="/onlineorder/images/loading btn.svg" width="40" height="40" class="img-fluid inline-block" />');var o=e.find(".fields_coupon").val().toLowerCase();""!=o?obj.cartStorage()?obj.validateCoupon(o,$(this).attr("keycode"),$(this).attr("qty")).then((function(t){""!=t&&($.Topic("Updatecart").publish(t),$("#btnCoupon").html("Apply"))})).catch((function(){0!=obj.campaignCouponsError.length&&(alert(obj.campaignCouponsError.join().replace(/,/g," ")),obj.campaignCouponsError=[],e.find(".fields_coupon").val(""),e.find(".btnCoupon").html("Apply"))})):(alert("Invalid Coupon Code"),$(this).text("Apply")):(alert("Please enter coupon code"),$(this).text("Apply"))})),$("#btnCoupon").unbind().on("click",(function(t){t.stopPropagation(),$(this).html('<img src="/onlineorder/images/loading btn.svg" width="40" height="40" class="img-fluid inline-block" />');var e=$("#fields_coupon").val().toLowerCase();""!=e?obj.cartStorage()?obj.applyCouponToOrder(e,!0):(alert("Invalid Coupon Code"),$(this).text("Apply Coupon")):(alert("Please enter coupon code"),$(this).text("Apply Coupon"))})),$(".dropdown.quantity").unbind().on("change",(function(){var e=$(this).parents(".item"),o=obj.multiple_straight_sale[e.attr("prodname")];void 0===o&&(o=obj.multiple_straight_sale[e.attr("baseprodname")]);var r=o[$(this).val()];if(void 0!==r){var a=parseFloat(r.price);e.find(".default-price span").html("$"+numberWithCommas(a.toFixed(2))),t($(this).parents(".prod"))}})),$(".items .qty-input .btn-minus").unbind().on("click",(function(){var e=$(this).closest(".qty-input").find(".quantity-hidden"),o=$(this).closest(".qty-input").find(".quantity"),r=parseInt(e.val()),a=$(this).parents(".items"),i=$(this).parents(".prod"),n=obj.multiple_straight_sale[a.attr("prodname")];if(void 0===n&&(n=obj.multiple_straight_sale[a.attr("baseprodname")]),!isNaN(r)&&r>0)if(obj.quantityAssignPerProd){var s=n[Object.keys(n)[r-1-1]];if(void 0!==s){e.val(s.qty),o.val(s.qty);var p=parseFloat(s.price);a.find(".default-price span").html("$"+numberWithCommas(p.toFixed(2))),a.find(".price").html("$"+numberWithCommas(p.toFixed(2))),obj.wasPrice(p,a),t(i)}}else{var d=r-1;if(0!=d){e.val(d),o.val(d);p=parseFloat(a.attr("price"))*parseInt(d);a.find(".default-price span").html("$"+numberWithCommas(p.toFixed(2))),a.find(".price").html("$"+numberWithCommas(p.toFixed(2))),obj.wasPrice(p,a),t(i)}}})),$(".items .qty-input .btn-add").unbind().on("click",(function(){var e=$(this).closest(".qty-input").find(".quantity-hidden"),o=$(this).closest(".qty-input").find(".quantity"),r=parseInt(e.val()),a=$(this).parents(".items"),i=$(this).parents(".prod"),n=obj.multiple_straight_sale[a.attr("prodname")];if(void 0===n&&(n=obj.multiple_straight_sale[a.attr("baseprodname")]),!isNaN(r))if(obj.quantityAssignPerProd){if(r<parseInt(Object.keys(n).pop())){var s=n[Object.keys(n)[r-1+1]];e.val(s.qty),o.val(s.qty);var p=parseFloat(s.price);a.find(".default-price span").html("$"+numberWithCommas(p.toFixed(2))),a.find(".price").html("$"+numberWithCommas(p.toFixed(2))),obj.wasPrice(p,a),t(i)}}else if(r<parseInt(a.attr("maxqty"))){var d=r+1;e.val(d),o.val(d);p=parseFloat(a.attr("price"))*parseInt(d);a.find(".default-price span").html("$"+numberWithCommas(p.toFixed(2))),a.find(".price").html("$"+numberWithCommas(p.toFixed(2))),obj.wasPrice(p,a),t(i)}})),$(".item").unbind().on("click",(function(t){t.stopPropagation();var e=$(this).parents(".prod"),o=$(this);if(t.which&&!$(this).hasClass("active")&&$(this).parents(".prod").find(".addToCart").hasClass("toCheckout"))return 0==dialog()||(e.find(".addToCart").html('<img src="/onlineorder/images/loading btn.svg" width="30" height="30" class="img-fluid inline-block" /> '),setTimeout((function(){e.find(".addToCart").removeClass("toCheckout"),e.find(".addToCart").attr("keycode",o.attr("data-keycode")),e.find(".addToCart").attr("alias",o.attr("alias")),e.find(".addToCart").attr("price",o.attr("price")),e.find(".addToCart").attr("shippingPrice",o.attr("shippingPrice")),e.find(".imgUrl").attr("imgUrl",o.attr("imgUrl")),e.find(".item.active").removeClass("active"),o.addClass("active"),e.find(".addToCart").trigger("click")}),700)),!1;e.find(".item.active").removeClass("active"),o.addClass("active"),e.find(".addToCart").attr("imgUrl",o.attr("imgUrl")),$(this).attr("data-hierarchy"),e.find(".addToCart").attr("keycode",o.attr("data-keycode")),e.find(".addToCart").attr("alias",void 0===o.attr("alias")?"":o.attr("alias")),e.find(".addToCart").attr("price",o.attr("price")),e.find(".addToCart").attr("shippingPrice",o.attr("shippingPrice"))})),$(".item.active").trigger("click"),$(".readMore").unbind().on("click",(function(t){t.stopPropagation();var e=$(this).parents(".caption");$(".monthly-offerdetails").fadeOut(),t.which&&$(e).next(".monthly-offerdetails").toggle((function(){$(e).next(".monthly-offerdetails").is(":visible")?e.next(".monthly-offerdetails").addClass("open"):e.next(".monthly-offerdetails").removeClass("open")}))})),$(".monthly-offerdetails").unbind().on("click",(function(t){t.stopPropagation();$(this).parents(".prod");$(".monthly-offerdetails").fadeOut()})),$(".productDisplay, .quick-view").unbind().on("click",".addToCart",(function(){var t=$(this).parents(".prod"),e=t.find(".item.active").length,o=$(this);if(""==$(this).attr("keycode"))return alert("Please select an option"),!1;var r,a=0,i=1,n=1,s=0;function p(t){var e=t.find(".items");if(obj.quantityAssignPerProd){var o=obj.multiple_straight_sale[e.attr("prodname")];void 0===o&&(o=obj.multiple_straight_sale[e.attr("baseprodname")]);var p=o[e.find(".quantity").val()];i=parseInt(t.find(".quantity").val()),a=parseFloat(p.price),keycode=p.productId,r=t.find(".items").attr("imgUrl"),s=parseFloat(p.shippingPrice)}else i=parseInt(t.find(".quantity").val()),a=parseFloat(t.find(".items").attr("price"))*i,keycode=t.find(".items").attr("data-keycode"),r=t.find(".items").attr("imgUrl"),n=t.find(".items").attr("maxqty"),s=t.find(".items").attr("shippingPrice")}function d(t){a=parseFloat(t.attr("price")),keycode=t.attr("keycode"),r=t.attr("imgUrl"),s=parseFloat(t.attr("shippingPrice"))}0!=e?0!=t.find(".quantity").length&&1==t.find(".item.active").attr("data-hierarchy")?p(t):d(o):0!=t.find(".quantity").length?p(t):d(o);var c={prodPrice:a.toFixed(2),prodName:$(this).attr("prodname"),keycode:keycode,pos:i,qty:i,imgUrl:r,maxQty:n,shippingPrice:s,alias:""==$(this).attr("alias")?"":$(this).attr("alias")};return c.wholeOrderCoupons=obj.getWholeOrderCoupons(api.getkonnecktiveSetup()),"object"==typeof obj.getCoupons(api.getkonnecktiveSetup(),keycode)?c.coupon=obj.getCoupons(api.getkonnecktiveSetup(),keycode):0==c.wholeOrderCoupons.length&&(c.noCoupon=!0),$(this).hasClass("toCheckout")?($.Topic("Addtocart").publish(c),location.href=$(this).attr("redirect"),!1):($.Topic("Addtocart").publish(c),!1)}))},obj.wasPrice=function(t,e){e.find(".prev-price").html("was $"+(2*t).toFixed(2))},obj.extractDomain=function(t){var e;return e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],$.trim(e)},obj.getCartStorageName=function(){var t=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")).toLowerCase().replace("/mobile",""),e=t.lastIndexOf("/");return(t=$.trim(t.substr(e).replace("/","")))==obj.extractDomain(window.location.pathname)&&(t=""),location.hostname.trim()+"/"+t},obj.callEvents=function(){obj.cartEvents()},obj.totalCarted=function(){return obj.totalCart},obj.req_response=function(t){return"success"==t.result.toLowerCase()},window.updateQueryStringParameter=function(t,e,o){var r=new RegExp("([?&])"+e+"=.*?(&|$)","i"),a=-1!==t.indexOf("?")?"&":"?";return t.match(r)?t.replace(r,"$1"+e+"="+o+"$2"):t+a+e+"="+o},window.removeQuerystring=function(t,e){var o=t.split("?");if(o.length>=2){for(var r=encodeURIComponent(e)+"=",a=o[1].split(/[&;]/g),i=a.length;i-- >0;)-1!==a[i].lastIndexOf(r,0)&&a.splice(i,1);return t=o[0]+"?"+a.join("&")}return t},obj.handleBars_compile=function(t,e){var o=$("#"+t).html();return Handlebars.compile(o)(e)},window.new_url=function(t){var e,o=location.pathname.split("/")[1].replace(/-/g,"");-1==t.indexOf("/")&&(o=""),-1==t.indexOf("?")&&(t=t+o+"?");var r=(e=t.split("?"))[1].split(/[&;]/g),a=location.search;if(a.split("?").length>=2){for(var i=r.length;i-- >0;)a=removeQuerystring(a,r[i].split("=")[0]),a=removeQuerystring(a,"fields_step"),a=removeQuerystring(a,"orderId"),a=removeQuerystring(a,"descriptor");-1!=location.pathname.toLowerCase().indexOf("thankyou.html")&&(e[1]="");var n="?"==a?e[1]:"&"+e[1];return e[0]+a+(""==e[1]?"":n)}return t},obj.monthly_offer_details=function(t){var e=t.monthlyOfferDetails;if(void 0!==e)return e=(e=(e=(e=(e=(e=(e=(e=e.split("{{shippingPrice}}").join("$"+parseFloat(t.monthly.shippingPrice).toFixed(2))).split("{{price}}").join("$"+parseFloat(t.monthly.price).toFixed(2))).split("{{rebill-price}}").join("$"+parseFloat(t.monthly.price).toFixed(2))).split("{{prodName}}").join(t.monthly.productName)).split("{{cycle1_price}}").join("$"+t.cycle1_price)).split("{{cycle1_shipPrice}}").join("$"+t.cycle1_shipPrice)).split("{{cycle2_price}}").join("$"+t.cycle2_price)).split("{{cycle2_shipPrice}}").join("$"+t.cycle2_shipPrice)},obj.initHandlebarsFuntions=function(){Handlebars.registerHelper("incremented",(function(t){return++t})),Handlebars.registerHelper("xif",(function(t,e){return Handlebars.helpers.x.apply(this,[t,e])?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("len",(function(t){return Object.keys(t).length})),Handlebars.registerHelper("addDash",(function(t){return t.toLocaleLowerCase().split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-")})),Handlebars.registerHelper("toFixed",(function(t){return parseFloat(t).toFixed(2)})),Handlebars.registerHelper("lowerCase",(function(t){return t.toLowerCase()})),Handlebars.registerHelper("math",(function(t,e,o,r){return arguments.length<4&&(r=o,o=e,e="+"),{"+":(t=parseFloat(t))+(o=parseFloat(o)),"-":t-o,"*":t*o,"/":t/o,"%":t%o}[e].toFixed(2)})),Handlebars.registerHelper("ifCond",(function(t,e,o,r){switch(e){case"==":return t==o?r.fn(this):r.inverse(this);case"===":return t===o?r.fn(this):r.inverse(this);case"!=":return t!=o?r.fn(this):r.inverse(this);case"!==":return t!==o?r.fn(this):r.inverse(this);case"<":return t<o?r.fn(this):r.inverse(this);case"<=":return t<=o?r.fn(this):r.inverse(this);case">":return t>o?r.fn(this):r.inverse(this);case">=":return t>=o?r.fn(this):r.inverse(this);case"&&":return t&&o?r.fn(this):r.inverse(this);case"||":return t||o?r.fn(this):r.inverse(this);default:return r.inverse(this)}})),Handlebars.registerHelper("x",(function(expression,options){var result,context=this;with(context)result=function(){try{return eval(expression)}catch(t){console.warn("•Expression: {{x '"+expression+"'}}\n•JS-Error: ",t,"\n•Context: ",context)}}.call(context);return result})),Handlebars.registerHelper("xif",(function(t,e){return Handlebars.helpers.x.apply(this,[t,e])?e.fn(this):e.inverse(this)}))},obj.filterByTag="",obj.filterTotalLength=0,obj.filtered=0,obj.filterProd=function(t){if(""!=obj.filterByTag){var e=0,o=0;for(var r in t)void 0===t[r].tags&&(t[r].tags=""),void 0!==t[r].tags&&"undefined"!=r&&(-1==t[r].tags.indexOf(obj.filterByTag)?delete t[r]:o++,e++);return obj.filterTotalLength=e,obj.filtered=o,t}return t},obj.productListDisplay=function(t){var e=[],o={};for(var r in t.products){var a=t.products[r];if(void 0!==a.straight_sale){var i=a.baseProductName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-"),n=a.productName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-");for(var s in a.straight_sale_count=Object.keys(a.straight_sale).length,a)switch(s){case"campaignProductId":""!=(p=location.search)&&(p="&"+(p=removeQuerystring(p,"campaignId")).substr(1)),a.redirectBaseProdName=new_url("product.html?campaignProductId="+a[s]+"&prodName="+i.toLocaleLowerCase()+"&campaignId="+api.getCompaignId()),a.redirect=new_url("product.html?campaignProductId="+a[s]+"&prodName="+n.toLocaleLowerCase()+"&campaignId="+api.getCompaignId()),a.checkout=new_url("checkout.html?campaignId="+api.getCompaignId()+p);break;case"monthlyOfferDetails":void 0!==a.monthly&&(a.monthlyOfferDetails=obj.monthly_offer_details(a))}Object.keys(a.straight_sale).length>1?(obj.multiple_straight_sale[a.baseProductName]={},obj.multiple_straight_sale[a.baseProductName]=a.straight_sale,a.ss_productIds.push("_qty_"),a.straight_sale_prodIds=a.ss_productIds.join(" "),a.default_straightsale=a.straight_sale[Object.keys(a.straight_sale)[0]],a.quantity_type=!0,e[a.order]=a):(a.ss_productIds.push("_qty_"),a.straight_sale_prodIds=a.ss_productIds.join(" "),a.default_straightsale=a.straight_sale[Object.keys(a.straight_sale)[0]],a.straight_sale=a.straight_sale[Object.keys(a.straight_sale)[0]],a.quantity_type=!1,e[a.order]=a)}else{i=a.baseProductName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-"),n=a.productName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-");for(var s in a)switch(s){case"campaignProductId":var p;""!=(p=location.search)&&(p="&"+(p=removeQuerystring(p,"campaignId")).substr(1)),a.redirectBaseProdName=new_url("product.html?campaignProductId="+a[s]+"&prodName="+i.toLocaleLowerCase()+"&campaignId="+api.getCompaignId()),a.redirect=new_url("product.html?campaignProductId="+a[s]+"&prodName="+n.toLocaleLowerCase()+"&campaignId="+api.getCompaignId()),a.checkout=new_url("checkout.html?campaignId="+api.getCompaignId()+p);break;case"monthlyOfferDetails":void 0!==a.monthly&&(a.monthlyOfferDetails=obj.monthly_offer_details(a))}e[a.order]=a}}o.productLists=obj.filterProd(e),""!=obj.filterByTag&&(o.filterTotalLength=obj.filterTotalLength,o.filtered=obj.filtered,0==obj.filtered?($(".showingItems").text(0),$(".totalItems").text(0)):($(".showingItems").text(obj.filtered),$(".totalItems").text(obj.filterTotalLength))),$(".productDisplay").html(""),$(".productDisplay").append(obj.handleBars_compile("productList-display",o)),$(".loader_").fadeOut().remove(),$(".loadContent").fadeIn(),obj.cartEvents(),console.log(o),obj.customCode(o)},obj.CountCart=function(t){$(".cartCount").text(t)},obj.itemOncart=function(){var t=0;if(obj.cartStorage()){var e=JSON.parse(obj.cartStorage());for(var o in obj.CountCart(e.length),e.length>0?$(".cartCount").show():$(".cartCount").hide(),$(".cartItem").html(""),$(".added-cart,.added-continue").remove(),e){0==$(".addToCart[prodname='"+e[o].prodName+"'] .added-cart").length&&$("<p class='text-center mt-2 added-cart'>Added to Cart</p>").insertBefore(".addToCart[prodname='"+e[o].prodName+"']"),$(".prod[data-prodname='"+e[o].prodName+"'] .addToCart").addClass("toCheckout").text("Checkout Now");var r=$(".prod[data-prodname='"+e[o].prodName+"'] .items");r.hasClass(e[o].keycode)&&r.hasClass("_qty_")?($(".prod[data-prodname='"+e[o].prodName+"'] .items."+e[o].keycode+" .qty-input .quantity").val(e[o].qty),$(".prod[data-prodname='"+e[o].prodName+"'] .items."+e[o].keycode+" .qty-input .quantity-hidden").val(e[o].qty),$(".prod[data-prodname='"+e[o].prodName+"'] .items."+e[o].keycode+"  .default-price span").text("$"+numberWithCommas(parseFloat(e[o].prodPrice).toFixed(2)))):r.hasClass("_qty_")||($(".prod[data-prodname='"+e[o].prodName+"'] .qty-input .quantity").val(e[o].qty),$(".prod[data-prodname='"+e[o].prodName+"'] .qty-input .quantity-hidden").val(e[o].qty),$(".prod[data-prodname='"+e[o].prodName+"'] .items .default-price span").text("$"+numberWithCommas(parseFloat(e[o].prodPrice).toFixed(2)))),0!=$(".item[data-keycode='"+e[o].keycode+"']").length&&$(".item[data-keycode='"+e[o].keycode+"']").trigger("click"),0!=$(".item[prodname='"+e[o].prodName+"'] .dropdown.quantity").length&&$(".item[prodname='"+e[o].prodName+"'] .dropdown.quantity option[value='"+e[o].qty+"']").attr("selected","selected"),0!=$(".r_addToCart[prodname='"+e[o].prodName+"']").length&&(void 0!==e[o].alias&&$(".prod[prodname='"+e[o].prodName+"']").find(".label").html(e[o].alias.replace("*","")),$(".prod[prodname='"+e[o].prodName+"']").find(".price").html("$"+e[o].prodPrice),$(".r_addToCart[prodname='"+e[o].prodName+"']").addClass("added").text("Checkout Now").attr("href",new_url("checkout.html"+location.search)).prev().show()),t++}obj.CountCart(e.length)}else obj.CountCart(0);0==t&&($(".cartItem").html(""),$(".cartItem").css("height","auto"),$(".cartItem").html("No Item on cart")),obj.totalCart=t,obj.itemOnCartCustomCode()},obj.itemOnCartCustomCode=function(){},obj.cartStorage=function(t,e){if(void 0===t)return"undefined"!=typeof localStorage?localStorage.getItem(obj.getCartStorageName()):$.cookie("cartItem_dw");"undefined"!=typeof localStorage?localStorage.setItem(obj.getCartStorageName(),t):$.cookie("cartItem_dw",t,{expires:e})},obj.updateCart=function(t){var e=new Date;if(e.setTime(e.getTime()+864e5),obj.cartStorage()){var o=JSON.parse(obj.cartStorage()),r=0,a="Exceeds cart limit. Unable to add item to cart.";for(var i in o)(o[i].prodName==t.prodName||o[i].keycode==t.keycode)&&r++;if(0==r){o.push(t),obj.cartStorage(JSON.stringify(o),e);var n=JSON.parse(obj.cartStorage());obj.totalCart==Object.keys(n).length&&alert(a)}else{var s;s=void 0!==t.discounted?findWithAttr(o,"keycode",t.keycode):findWithAttr(o,"prodName",t.prodName),void 0!==t.prodPrice&&(o[s].prodPrice=t.prodPrice),void 0!==t.prodName&&(o[s].prodName=t.prodName),void 0!==t.qty&&(o[s].qty=t.qty),void 0!==t.keycode&&(o[s].keycode=t.keycode),void 0!==t.pos&&(o[s].pos=t.pos),void 0!==t.imgUrl&&(o[s].imgUrl=t.imgUrl),void 0!==t.maxQty&&(o[s].maxQty=t.maxQty),void 0!==t.shippingPrice&&(o[s].shippingPrice=t.shippingPrice),void 0!==t.alias&&(o[s].alias=t.alias),void 0!==t.coupon&&(o[s].coupon=t.coupon),void 0!==t.coupon&&delete o[s].noCoupon,void 0!==t.discounted&&void 0!==o[s].coupon&&(o[s].coupon.discounted=t.discounted,void 0!==t.couponCode&&(o[s].coupon.couponCode=t.couponCode),void 0!==t.priceDiscount&&(o[s].coupon.priceDiscount=t.priceDiscount),void 0!==t.shipDiscount&&(o[s].coupon.shipDiscount=t.shipDiscount),void 0!==t.wholeOrderApplied&&(o[s].coupon.wholeOrderApplied=t.wholeOrderApplied)),void 0!==t.noCoupon&&delete o[s].coupon,obj.cartStorage(JSON.stringify(o),e);n=JSON.parse(obj.cartStorage());obj.totalCart==Object.keys(n).length&&-1==s&&alert(a)}obj.CountCart(o.length)}else{o=[t];obj.cartStorage(JSON.stringify(o),e),obj.CountCart(1)}},obj.prodSetup=function(t){var e=0;if(prodSetup=[],"object"==typeof t){for(var o in t){var r={};if(t[o].hasOwnProperty("order"))if(t[o].hasOwnProperty("prod")){for(var a in t[o])switch(a){case"order":case"tags":case"prod":case"related":case"selectionOption":case"defaultLabel":case"prodDescription":case"monthlyOfferDetails":case"OfferDetails":case"apiKey":r[a]=t[o][a]}prodSetup.push(r)}else console.error("Error at index "+o+" "+JSON.stringify(t[o])+" : prod property is required to this setup");else console.error("Error at index "+o+" "+JSON.stringify(t[o])+" : order property is required to this setup"),e++}return 0!=e&&(prodSetup=[]),obj}},obj.getProductDetails=function(t,e){var o={};for(var r in"boolean"==typeof e&&(obj.quantityAssignPerProd=e),campaignProducts)campaignProducts[r].productName===t&&(o=campaignProducts[r]);return o},obj.loadCampaign=function(t){obj.req_response(t)?(response=combinedSameBaseProduct_monthly(response=t.message.data[api.getCompaignId()].products),campaignProducts=t.message.data[api.getCompaignId()].products,$.Topic("FirstPageLoaded").publish(t.message.data[api.getCompaignId()])):alert("ERROR: "+t.message+".")},obj.removeItemFromcart=function(t){var e=new Date;e.setTime(e.getTime()+864e5);var o=JSON.parse(obj.cartStorage());for(var r in o)o[r].prodName==t&&o.splice(r,1);obj.totalCart=o.length,obj.cartStorage(JSON.stringify(o),e)},obj.listCartProducts=function(t){if(obj.req_response(t)){response=combinedSameBaseProduct_monthly(response=t.message.data[api.getCompaignId()].products);var e=t.message.data[api.getCompaignId()].products;obj.listProducts=e,obj.reApplyCoupon(),obj.cartItemsCheckout(e)}else alert("ERROR: "+t.message)},obj.cartListDisplay=function(){var t=[],e=[],o=[],r={},a=0,i=0,n=0,s=response;if(obj.cartStorage()){var p=JSON.parse(obj.cartStorage());for(var d in $(".cartItem").html(""),p){if(void 0!==p[d].alias)if(""!=p[d].alias&&-1!=p[d].alias.toLowerCase().indexOf("subscription")){if(void 0!==p[d].coupon)if(o.push(p[d].coupon),p[d].coupon.hasOwnProperty("wholeOrderApplied")){var c=0;c+=parseFloat(p[d].coupon.priceDiscount),c+=parseFloat(p[d].coupon.shipDiscount),p[d].productDiscount=c.toFixed(2),p[d].coupon.discounted=null,n=c}else if(p[d].coupon.hasOwnProperty("discounted")){c=0;c+=parseFloat(p[d].coupon.priceDiscount),n+=c+=parseFloat(p[d].coupon.shipDiscount),p[d].productDiscount=c.toFixed(2)}var l=findWithAttr(s,"productName",p[d].prodName);-1!=l&&s[l].hasOwnProperty("monthlyOfferDetails")&&(p[d].monthlyOfferDetails=obj.monthly_offer_details(s[l])),e.push(p[d])}else{if(void 0!==p[d].coupon)if(o.push(p[d].coupon),p[d].coupon.hasOwnProperty("wholeOrderApplied")){c=0;c+=parseFloat(p[d].coupon.priceDiscount),c+=parseFloat(p[d].coupon.shipDiscount),p[d].productDiscount=c.toFixed(2),p[d].coupon.discounted=null,n=c}else if(p[d].coupon.hasOwnProperty("discounted")){c=0;c+=parseFloat(p[d].coupon.priceDiscount),n+=c+=parseFloat(p[d].coupon.shipDiscount),p[d].productDiscount=c.toFixed(2)}t.push(p[d])}else{if(void 0!==p[d].coupon)if(o.push(p[d].coupon),p[d].coupon.hasOwnProperty("wholeOrderApplied")){c=0;c+=parseFloat(p[d].coupon.priceDiscount),c+=parseFloat(p[d].coupon.shipDiscount),p[d].productDiscount=c.toFixed(2),p[d].coupon.discounted=null,n=c}else if(p[d].coupon.hasOwnProperty("discounted")){c=0;c+=parseFloat(p[d].coupon.priceDiscount),c+=parseFloat(p[d].coupon.shipDiscount),p[d].productDiscount=c.toFixed(2),n+=c}t.push(p[d])}a+=parseFloat(p[d].shippingPrice),i+=parseFloat(p[d].prodPrice)}r.one_time=t,r.subscriptions=e,r.shipping_total=a.toFixed(2),r.totalPriceOnly=i.toFixed(2),r.totalPriceWithShipping=(i+a).toFixed(2),r.totalPrice=(i-parseFloat(n)).toFixed(2),r.coupon=obj.listAllCoupon(api.getkonnecktiveSetup()).length,r.discountedPrice=0!=n?parseFloat(n).toFixed(2):0}0==e.length&&0==t.length?($(".cartItem").html(""),$(".cartItem").html("No Item on cart"),$(".totalcart-container").hide()):($(".totalCartAmount").html(r.totalPrice),$(".totalcart-container").show(),$(".cartItem").append(obj.handleBars_compile("cartList-display",r))),obj.cartEvents()},obj.cartItemsCheckout=function(t){var e=[],o=[],r=[],a={},i=0,n=0,s=0,p="object"!=typeof t?obj.listProducts:t;if(obj.cartStorage()){var d=JSON.parse(obj.cartStorage());for(var c in $(".cartItem").html(""),d){if(void 0!==d[c].alias)if(""!=d[c].alias&&-1!=d[c].alias.toLowerCase().indexOf("subscription")){if(void 0!==d[c].coupon)if(r.push(d[c].coupon),d[c].coupon.hasOwnProperty("wholeOrderApplied")){var l=0;l+=parseFloat(d[c].coupon.priceDiscount),l+=parseFloat(d[c].coupon.shipDiscount),d[c].productDiscount=l.toFixed(2),d[c].coupon.discounted=null,s=l}else if(d[c].coupon.hasOwnProperty("discounted")){l=0;l+=parseFloat(d[c].coupon.priceDiscount),l+=parseFloat(d[c].coupon.shipDiscount),d[c].productDiscount=l.toFixed(2),s+=l}var u=findWithAttr(p,"productName",d[c].prodName);-1!=u&&p[u].hasOwnProperty("monthlyOfferDetails")&&(d[c].monthlyOfferDetails=obj.monthly_offer_details(p[u])),o.push(d[c])}else{if(void 0!==d[c].coupon)if(r.push(d[c].coupon),d[c].coupon.hasOwnProperty("wholeOrderApplied")){l=0;l+=parseFloat(d[c].coupon.priceDiscount),l+=parseFloat(d[c].coupon.shipDiscount),d[c].productDiscount=l.toFixed(2),d[c].coupon.discounted=null,s=l}else if(d[c].coupon.hasOwnProperty("discounted")){l=0;l+=parseFloat(d[c].coupon.priceDiscount),l+=parseFloat(d[c].coupon.shipDiscount),d[c].productDiscount=l.toFixed(2),s+=l}e.push(d[c])}else{if(void 0!==d[c].coupon)if(r.push(d[c].coupon),d[c].coupon.hasOwnProperty("wholeOrderApplied")){l=0;l+=parseFloat(d[c].coupon.priceDiscount),l+=parseFloat(d[c].coupon.shipDiscount),d[c].productDiscount=l.toFixed(2),d[c].coupon.discounted=null,s=l}else if(d[c].coupon.hasOwnProperty("discounted")){l=0;l+=parseFloat(d[c].coupon.priceDiscount),l+=parseFloat(d[c].coupon.shipDiscount),d[c].productDiscount=l.toFixed(2),s+=l}e.push(d[c])}i+=parseFloat(d[c].shippingPrice),n+=parseFloat(d[c].prodPrice)}a.one_time=e,a.subscriptions=o,a.shipping_total=i.toFixed(2),a.totalPriceOnly=n.toFixed(2),a.totalPriceWithShipping=(n+i).toFixed(2),a.totalPrice=(n+i-parseFloat(s)).toFixed(2),a.coupon=obj.listAllCoupon(api.getkonnecktiveSetup()).length,a.discountedPrice=0!=s?parseFloat(s).toFixed(2):0}0==o.length&&0==e.length?($(".cartItem").html(""),$(".cartItem").html("No Item on cart"),$("#billed").hide()):($(".cartItem").append(obj.handleBars_compile("cartList-display",a)),$("#billed").show()),$("#productOption-container, #pay_source").remove(),0!=$("#pay_source").length||""!=getQueryStringByName("fields_step")&&"second"!=getQueryStringByName("fields_step")||$("body").prepend('<input type="hidden" id="pay_source" name="pay_source" value="creditcard"/>'),obj.cartEvents(),console.log(a),obj.customCode(a)},obj.customCode=function(t){},obj.specificProd_gallery=function(){var t={};t.gallery={image:getQueryStringByName("prodName")},$(".prod-gallery").html(""),$(".prod-gallery").append(obj.handleBars_compile("ProductGallery",t))},obj.specificProd_Option=function(t){var e,o=[],r={},a="",i="",n="";for(var s in t){var p=t[s];p.baseProductName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-"),p.productName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-");if(void 0!==p.monthly&&(p.monthlyOfferDetails=obj.monthly_offer_details(p)),void 0!==p.straight_sale&&(obj.multiple_straight_sale[p.baseProductName]={},obj.multiple_straight_sale[p.baseProductName]=p.straight_sale),p.campaignProductId==obj.defaultProdId){a=p.prodDescription,e=p.productSku,n=p.baseProductName,i=p.productName;var d=location.search;d=updateQueryStringParameter(d,"campaignId",api.getCompaignId()),p.checkout=new_url("checkout.html"+d),p.default_straightsale=p.straight_sale[Object.keys(p.straight_sale)[0]],p.straight_sale=p.straight_sale[Object.keys(p.straight_sale)[0]],p.ss_productIds.push("_qty_"),p.straight_sale_prodIds=p.ss_productIds.join(" "),o.push(p)}else if(p.campaignProductId==getQueryStringByName("campaignProductId")){a=p.prodDescription,e=p.productSku,n=p.baseProductName,i=p.productName;d=location.search;d=updateQueryStringParameter(d,"campaignId",api.getCompaignId()),p.checkout=new_url("checkout.html"+d),void 0!==p.straight_sale&&(p.default_straightsale=p.straight_sale[Object.keys(p.straight_sale)[0]],p.straight_sale=p.straight_sale[Object.keys(p.straight_sale)[0]],p.ss_productIds.push("_qty_"),p.straight_sale_prodIds=p.ss_productIds.join(" ")),o.push(p)}}r.chooseOption=o,console.log(r),$(".prodQuantity").html(""),$(".productDisplay").attr("data-prodname",i),$(".productDisplay").addClass("product"),$(".prodQuantity").append(obj.handleBars_compile("product-choice",r)),0==o.length?($("#notFoundContainer").html("").removeClass("row"),$("#description,.loadContent").html(""),$("#notFoundContainer").append(obj.handleBars_compile("not-found",r))):($(".base-prod-name,.base-product-name").html(n),$(".prod-name,.product-name").html(i),$(".sku").html(e),$("body").append("<div class='tempdiv' id='tempdiv' style='display:none'>"+a+"</div"),$("#product-description,.product-description").html($(".ProductDescription").html()),$("#information, .information").html($(".ProductInformation").html()),$("#shippingreturn, .shippingreturn").html($(".ShippingReturn").html()),$(".short-desc").html($(".ProductDescriptionExcerpt").html()),void 0===$(".ProductInformation").html()&&($(".nav-information").hide(),$("#header2, .nav-information-mobile").hide()),$("#tempdiv").remove(),0!=$("#ProductGallery").length&&obj.specificProd_gallery(),0!=$("#related_Prods").length&&obj.relatedProds(t)),obj.prodPageCode(r)},obj.prodPageCode=function(t){},obj.relatedProds=function(t){var e=[],o={};t=t.filter((function(t){return t}));for(var r in t)if(t[r].hasOwnProperty("related")&&t[r].campaignProductId==getQueryStringByName("campaignProductId")){var a=t[r].related;for(var i in a){var n=findWithAttr(t,"baseProductName",a[i]);void 0===t[n]&&(n=findWithAttr(t,"productName",a[i]));var s=t[n];if(-1!=n){for(var p in s){var d=s.baseProductName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-"),c=s.productName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-");switch(p){case"campaignProductId":s.redirect=new_url("product.html?campaignProductId="+s[p]+"&prodName="+d.toLocaleLowerCase()+"&campaignId="+api.getCompaignId()),s.redirectProdName=new_url("product.html?campaignProductId="+s[p]+"&prodName="+c.toLocaleLowerCase()+"&campaignId="+api.getCompaignId());break;case"straight_sale":"object"==typeof s.straight_sale[Object.keys(s.straight_sale)[0]]&&(s.straight_sale=s.straight_sale[Object.keys(s.straight_sale)[0]])}}e.push(s)}}}o.relatedProds=e,$(".relatedProdDisplay").attr("style",""),$(".relatedProdDisplay").append(obj.handleBars_compile("related_Prods",o))},obj.specific_prod=function(t){if(obj.req_response(t)){response=combinedSameBaseProduct_monthly(response=t.message.data[api.getCompaignId()].products);var e=t.message.data[api.getCompaignId()].products;obj.specificProd_Option(e),obj.cartEvents(),obj.customCode(),$("#continue").attr("href",new_url("index.html")),$(".loadContent,.showcase, .related-product").fadeIn(),$.Topic("CartItems").publish(t)}else alert("ERROR: "+t.message)},obj.pageSelection=function(){if(-1!=obj.defaultProdId)return api.importClick(),api.importLead(),api.queryCampaign(obj.specific_prod),!1;switch(location.pathname.split(".html")[0].split("/").slice(-1).toString().toLowerCase()){case"product":case"product-new":api.importClick(),api.queryCampaign(obj.specific_prod);break;case"payment":case"checkout":api.importClick(),api.queryCampaign(obj.listCartProducts);break;default:api.importClick(),api.queryCampaign(obj.loadCampaign)}},obj.setDefaultProd=function(t){return"object"==typeof t&&("number"==typeof t.Default_prodId&&(obj.defaultProdId=t.Default_prodId),"string"==typeof t.Default_prodName&&(obj.defaultProdName=t.Default_prodName.split(" ").join("-").replace(/([†*%?^=!:${}()|\[\]\/\\])/g,"-").toLowerCase())),obj},obj.exec=function(){return $.Topic("FirstPageLoaded"),$.Topic("Addtocart"),$.Topic("RemoveItem"),$.Topic("FirstPageLoaded").subscribe(obj.productListDisplay),$.Topic("FirstPageLoaded").subscribe(obj.itemOncart),$.Topic("CartItems").subscribe(obj.itemOncart),$.Topic("Addtocart").subscribe(obj.updateCart),$.Topic("Addtocart").subscribe(obj.itemOncart),$.Topic("Updatecart").subscribe(obj.updateCart),$.Topic("Updatecart").subscribe(obj.cartItemsCheckout),$.Topic("RemoveItem").subscribe(obj.removeItemFromcart),$.Topic("RemoveItem").subscribe(obj.cartItemsCheckout),"undefined"==typeof Handlebars?(alert("Error: This page is powered by handlebarsjs please add it."),!1):(obj.initHandlebarsFuntions(),void 0===api?(alert("Error: Please pass object variable from KonnekApiInit() function."),!1):void obj.pageSelection())},copyQueryURLevent(),obj},init="KonnekCart";"function"!=typeof window[init]&&(window[init]=kCart)})();